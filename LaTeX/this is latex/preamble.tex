\usepackage[utf8]{inputenc} %support encoding for various symbols
\usepackage[T1]{fontenc} %support fonts
\usepackage[french]{babel} %set language [funky, might have to restart VScode if changed]
\usepackage{lmodern} %font typeface
\usepackage[nottoc]{tocbibind} %index document elements
%%% Use to put unnumbered sections in the TOC
\newcommand*{\nsection}[1]{
    \section*{#1}
    \addcontentsline{toc}{section}{#1}
}
\newcommand*{\nsubsection}[1]{
    \subsection*{#1}
    \addcontentsline{toc}{subsection}{#1}
}

\usepackage{multicol}
\usepackage{lipsum} %filler "lorem ipsum" text
\newcommand{\lip}[1]{\lipsum[#1][1-3]}
\usepackage{xcolor} %colours
\definecolor{dark green}{HTML}{007300}
\definecolor{enby}{HTML}{9b59d0}
\usepackage{tcolorbox} %text blocks [very powerful]
\tcbuselibrary{most, theorems}
\tcbset{enhanced jigsaw} %define global tcb settings

\newcommand{\lrmargin}{1in} %define left-right margin value
\usepackage{geometry} %page layout
\geometry{
    a4paper,
    top=2cm,
    bottom=1in,
    left=\lrmargin,
    right=\lrmargin,
}
\usepackage{titling} %better control in titles
\usepackage[parfill]{parskip} %paragraph spacing
\usepackage{setspace} %line spacing
\usepackage{ragged2e} %better text alignement
\usepackage{epigraph} %for quotations
\usepackage{fancyhdr, lastpage} %for headers and footers, adds the last page number as a ref
\pagestyle{fancy} %apply style
\fancyhead{} %remove defaut headers
\fancyfoot{} %remove defaut footers
\fancyhead[L]{This is \LaTeX}
\fancyhead[R]{Astro}
\fancyfoot[C]{\thepage\ sur\ \pageref*{LastPage}}
\usepackage{fancyvrb} %verbatim code
\usepackage{listings} %code blocks
\usepackage{enumitem} %customises lists
\setlist[itemize,1]{label=$\bullet$}
\setlist[itemize,2]{label=-}
\setlist[itemize,3]{label=$\rightleftharpoons$}

\usepackage{wrapfig} %wrap text around figures and tables
\usepackage{array} %better tables
\usepackage{booktabs} %better table lines
\newcommand{\trule}{\addlinespace[1pt]\toprule}
\usepackage{graphicx, float} %required for inserting images
\graphicspath{{./images/}} %specifies filepath for images
\newcommand{\anarchy}{\includegraphics[width=12pt, decodearray={0 0 0 0 0 0}]{anarchy_symbol.png}}
\usepackage{tikz,tikz-cd} %graphs, commutative diagrams
%\usepackage[compat=1.1.0]{tikz-feynman} %feynman diagrams [%needs luatex%]
\newcommand*{\pretable}[4]{
    % 1=tablename; 2=column name; 3=error column name; 4=new column name
    \pgfplotstablecreatecol[
        create col/assign/.code={%
            \edef\entry{$\thisrow{#2} \pm \thisrow{#3}$}%
            \pgfkeyslet{/pgfplots/table/create col/next content}\entry
        }
    ]{#4}#1
}

\usepackage{amsmath, amssymb, amsthm, amsfonts, bm} %math stuff  
\usepackage[fixamsmath]{mathtools}  % Extension to amsmath
\newcommand{\refmath}[1]{\texorpdfstring{$\bm{#1}$}{#1}}
\newcommand{\refmathx}[2]{\texorpdfstring{$\bm{#1}$}{#2}}
\usepackage{physics} %physics notation
\newcommand{\si}[1]{\ \text{#1}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\K}{\mathbb{K}}
\newcommand{\M}[3]{\mathbb{#1}^{#2\cp#3}}
% Symbol and utility packages
\usepackage{cancel}
\usepackage[nointegrals]{wasysym}

\theoremstyle{definition}
\newtheorem{dfn}{Définition}[section]
\theoremstyle{plain} %default
\newtheorem{lem}[dfn]{Lemme}
\newtheorem{thm}[dfn]{Théorème}
\newtheorem{prop}[dfn]{Proposition}
\newtheorem{cor}[dfn]{Corollaire}
\theoremstyle{remark}
\newtheorem{rem}[dfn]{Remarque}
%other environment [TBD]
\theoremstyle{definition}
\newtheorem{exe}[dfn]{Exemple}
\newtheorem{exo}[dfn]{Exercice}

\foreach\var in {dfn, lem, thm, prop, cor}{
    \tcolorboxenvironment{\var}{
    blanker, breakable, left=5mm, borderline west={1mm}{0pt}{black}
}}

% \newtcbtheorem
%     [number within=section, use counter from=dfn]% init options
%     {example}% name
%     {Example}% title
%     {%
%         colback = orange!5,
%         colframe = green!50!black!50!white,
%         fonttitle = \bfseries,
%     }% options
%     {ex}% prefix

\usepackage{footnotebackref}
\usepackage{hyperref} %hyperlink stuff [!!ALWAYS LAST!!]

\hypersetup{
    colorlinks = true,
    linkcolor = dark green,
    urlcolor = blue,
    pdftitle={This is LaTeX},
}
\urlstyle{same} %changes url font from monospace to normal

\usepackage[french]{cleveref} %after hyperref